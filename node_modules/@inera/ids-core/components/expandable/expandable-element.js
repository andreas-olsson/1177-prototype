import{__decorate as i}from"tslib";import{LitElement as e,html as t}from"lit";import{property as s,state as d}from"lit/decorators.js";import o from"../styles/global-styles.js";import{generateId as n}from"../../utilities/utils.js";import a from"@inera/ids-design/components/expandable/expandable-lit";class r extends e{constructor(){super(...arguments),this.headline="",this.level=1,this.variation=1,this.borderless=!1,this.expanded=!1,this.isExpanded=!1,this.rotation=90,this.isInsideCard=!1,this.hasChildren=!1,this.contentId=n(),this.onKeyPress=i=>{32==i.keyCode&&(i.preventDefault(),this.toggleExpansion())}}firstUpdated(i){super.firstUpdated(i),this.isExpanded=this.expanded,this.handleChildren(),this.isInsideCard=Boolean(this.closest("ids-card"))}handleChildren(){this.querySelectorAll("ids-expandable").length>0&&(this.hasChildren=!0,this.querySelectorAll("ids-expandable").forEach((i=>{i.setAttribute("level","2")})))}toggleExpansion(){this.isExpanded=!this.isExpanded,this.setRotation()}setRotation(){this.rotation=this.isExpanded?-90:90}renderIcon(){return 1===this.level?t`<ids-icon-chevron-bold width="16" height="16" rotate="${this.rotation}"></ids-icon-chevron-bold>`:2===this.level?t`<div class="ids-expandable__icon">${this.isExpanded?t`<ids-icon-minus color="white" width="16" height="16"></ids-icon-minus>`:t`<ids-icon-plus color="white" width="16" height="16"></ids-icon-plus>`}</div>`:t``}render(){return t`<div class="ids-expandable ${this.isExpanded?"ids-expandable--expanded":""} ${this.isInsideCard?"ids-expandable--inside-card":""} ${this.hasChildren?"ids-expandable--has-children":""} ${2===this.level?"ids-expandable--child":""} ${2===this.variation?"ids-expandable--variation-2":""}"><div class="ids-expandable__button" role="button" tabindex="0" @click="${this.toggleExpansion}" @keydown="${this.onKeyPress}" aria-expanded="${this.isExpanded}" aria-controls="${this.contentId}"><div class="ids-expandable__inner ${this.borderless?"borderless":""}"><h2 class="ids-expandable__headline">${this.headline}</h2>${this.renderIcon()}</div></div><div aria-hidden="${!this.isExpanded}" id="${this.contentId}" class="ids-expandable__content"><slot></slot></div></div>`}}r.styles=[o,a],i([s({type:String})],r.prototype,"headline",void 0),i([s({type:Number})],r.prototype,"level",void 0),i([s({type:Number})],r.prototype,"variation",void 0),i([s({type:Boolean})],r.prototype,"borderless",void 0),i([s({type:Boolean})],r.prototype,"expanded",void 0),i([d()],r.prototype,"isExpanded",void 0),i([d()],r.prototype,"rotation",void 0),i([d()],r.prototype,"isInsideCard",void 0);export{r as IDSExpandable};
