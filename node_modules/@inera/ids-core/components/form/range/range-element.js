import{__decorate as t}from"tslib";import{html as i}from"lit";import{property as s,state as e}from"lit/decorators.js";import{FormBaseElement as n}from"../base/form-base-element.js";import{logError as a,logWarning as r}from"../../../utilities/utils.js";import h from"@inera/ids-design/components/form/range/range-lit";class p extends n{constructor(){super(...arguments),this.showticks=!1,this.min=0,this.max=0,this.step=0,this.handleInputChange=()=>{if(this.input){const t=+this.input.value;this.input.style.backgroundSize=100*(t-this.min)/(this.max-this.min)+"% 100%",this.input.setAttribute("aria-valuenow",this.input.value)}}}firstUpdated(t){super.firstUpdated(t),this.inputField?.classList.add("ids-range"),this.setupValues(),this.validateProps(),this.handleInputChange()}disconnectedCallback(){this.input&&this.input.addEventListener("input",this.handleInputChange),super.disconnectedCallback()}setupValues(){this.input&&(this.min=+this.input.min,this.max=+this.input.max,this.step=+this.input.step,this.input.setAttribute("aria-valuemin",""+this.min),this.input.setAttribute("aria-valuemax",""+this.max),this.input.addEventListener("input",this.handleInputChange))}validateProps(){this.min>this.max&&a(this,"Max has to be larger than Min"),this.max%this.step>0&&r(this,"Step cant reach max")}getRangeStep(t){return i`<div class="ids-range-tick">${t}</div>`}getRangeSteps(){if(this.step>0){const t=[];for(let i=this.min;i<=this.max;i+=this.step)t.push(this.getRangeStep(Math.floor(i)));return t}return""}render(){return i`<div class="ids-range-wrapper">${this.renderLabel()}<slot></slot>${this.showticks?i`<div class="ids-range-ticks">${this.getRangeSteps()}</div>`:""}</div>`}}p.styles=[h],t([s({type:Boolean})],p.prototype,"showticks",void 0),t([e()],p.prototype,"min",void 0),t([e()],p.prototype,"max",void 0),t([e()],p.prototype,"step",void 0);export{p as IDSRange};
