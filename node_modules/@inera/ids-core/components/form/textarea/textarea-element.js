import{__decorate as t}from"tslib";import{css as e,html as s}from"lit";import{FormBaseElement as i}from"../base/form-base-element.js";import{property as a}from"lit/decorators.js";class r extends i{constructor(){super(...arguments),this.block=!1,this.autosize=!1}firstUpdated(t){super.firstUpdated(t),this.textarea?.classList.add("ids-textarea"),this.setWrapperDisplayStyle(),this.block&&(this.textarea.style.width="100%"),this.autosize&&(this.textarea?.classList.add("ids-textarea--autosize"),this.textarea.style.width="100%",this.textarea.addEventListener("input",this.updateTextareaHeight.bind(this)),visualViewport.addEventListener("resize",this.updateTextareaHeight.bind(this))),setTimeout((()=>{this.updateTextareaHeight()}),75)}disconnectedCallback(){super.disconnectedCallback(),this.autosize&&(this.textarea.removeEventListener("input",this.updateTextareaHeight.bind(this)),visualViewport.removeEventListener("resize",this.updateTextareaHeight.bind(this)))}setWrapperDisplayStyle(){this.style.display&&(this.shadowRoot.querySelector(".ids-textarea-wrapper").style.display=this.style.display)}updateTextareaHeight(){this.textarea.style.height="auto",this.textarea.scrollHeight>70&&(this.textarea.style.height=this.textarea.scrollHeight+"px")}render(){return s`<div class="ids-textarea-wrapper ${this.autosize?"ids-textarea-wrapper--autosize":""} ${this.block||this.autosize?"ids-textarea-wrapper--block":""}">${this.renderLabel()}<slot></slot>${this.renderHint()}<slot name="error-msg"></slot></div>`}}r.styles=[e`.ids-textarea-wrapper{display:inline-block}.ids-textarea-wrapper.ids-textarea-wrapper--block{display:block}:host([autosize]),:host([block]){display:block}`],t([a({type:Boolean,reflect:!0})],r.prototype,"block",void 0),t([a({type:Boolean})],r.prototype,"autosize",void 0);export{r as IDSTextarea};
