import{__decorate as e}from"tslib";import{LitElement as i,html as t}from"lit";import o from"../styles/global-styles.js";import{stylesBase as s,styles1177 as r,styles1177pro as n,stylesInera as d,stylesIneraAdmin as a,stylesIneraLegacy as l,stylesIneraAdminLegacy as c}from"./header-styles.js";import{property as h,state as g}from"lit/decorators.js";import{generateId as p}from"../../utilities/utils.js";class u extends i{constructor(){super(...arguments),this.type="",this.brandtext="",this.brandtexttop="",this.brandtextbottom="",this.pickregiontext="Välj region",this.hidebrand=!1,this.fluid=!1,this.hideregionpicker=!1,this.srlogolabel="Logotyp",this.unresponsive=!1,this.logohref="javascript:void()",this.isRegionExpanded=!1,this.hasViewPortResizeEvent=!1,this.lastKnownRegionId="",this.handleVPResize=()=>{this.regionIcon&&(visualViewport.width>1024&&this.regionIcon?this.regionIcon.setAttribute("slot","region"):this.regionIcon.setAttribute("slot","region-mobile"))}}firstUpdated(e){"1177"!==this.type||this.unresponsive||this.setup1177RegionIcon()}updated(e){super.updated(e),"1177"===this.type&&(this.hasViewPortResizeEvent||this.setup1177RegionIcon(),this.regionIcon=this.querySelector("[slot=region]")||this.querySelector("[slot=region-mobile]"),this.regionIcon&&this.regionIcon.getAttribute("id")!==this.lastKnownRegionId&&this.setRegionIconAttributes())}setRegionIconAttributes(){this.lastKnownRegionId=this.regionIcon.getAttribute("id")||p(),this.regionIcon.setAttribute("id",this.lastKnownRegionId),this.regionIcon.setAttribute("colorpreset","4"),this.regionIcon.setAttribute("width","100%"),this.regionIcon.setAttribute("height","100%")}setup1177RegionIcon(){this.regionIcon=this.querySelector("[slot=region]")||this.querySelector("[slot=region-mobile]"),this.addEventListenerForRegionIcon()}addEventListenerForRegionIcon(){visualViewport.addEventListener("resize",this.handleVPResize),this.hasViewPortResizeEvent=!0,this.handleVPResize()}renderLogo(){return"1177"===this.type&&this.regionIcon?t`<ids-col cols="auto" class="header-logo-col header-fill"><ids-row align="center"><ids-col cols="auto">${this.renderLogoLink()}</ids-col><ids-col cols="auto"><div class="logo-region-divider"></div></ids-col><ids-col cols="auto"><slot name="region"></slot></ids-col></ids-row></ids-col>`:t`<ids-col cols="auto" class="header-logo-col header-fill ${this.hideregionpicker?"no-picker":""}">${this.renderLogoLink()}</ids-col>`}renderLogoLink(){return t`<div class="header-logo ${this.regionIcon||"1177"!==this.type?"":"logo-btn-spacer"}">${this.querySelector('[slot="logo"]')?t`<slot name="logo"></slot>`:t`<a href="${this.logohref}" aria-label="${this.srlogolabel}" class="logo-btn btn-no-styles">${this.renderLogoIcon()}</a>`}</div>`}renderLogoIcon(){if(!this.hidebrand)switch(this.type){case"1177":return t`<ids-icon-1177 colorpreset="4" width="100%" height="100%"></ids-icon-1177>`;case"1177-pro":return t`<ids-icon-1177 color="#c12143" width="100%" height="100%"></ids-icon-1177>`;case"inera":return t`<ids-icon-inera color="var(--IDS-COLOR-PRIMARY-40)" width="100%" height="100%"></ids-icon-inera>`;case"inera-legacy":return t`<ids-icon-inera-legacy width="100%" height="100%"></ids-icon-inera-legacy>`}return t``}renderRegionPickerMobile(){return this.unresponsive?null:t`<ids-col class="hide-on-desktop header-fill pick-region-mobile-col"><button @click="${this.toggleRegion}" class="btn-no-styles pick-region-mobile-btn"><ids-col cols="auto">${this.regionIcon?t`<slot name="region-mobile"></slot>`:t`${this.pickregiontext}`}<slot name="avatar-left"></slot></ids-col><div class="grid-spacer"></div><ids-col cols="auto"><ids-icon-chevron-bold class="change-region-chevron ${this.isRegionExpanded?"expanded":""}" color="white" width="7" height="12"></ids-icon-chevron-bold></ids-col></button></ids-col>`}renderRegionPicker(){return this.hideregionpicker?t`<ids-col cols="auto" class="no-picker header-fill"></ids-col><div class="grid-spacer"></div>`:t`${this.renderRegionPickerMobile()} ${this.renderRegionPickerDesktop()}`}renderRegionPickerDesktop(){return t`<ids-col cols="auto" class="region-picker-col no-select ${this.unresponsive?"":"hide-on-mobile"}"><button @click="${this.toggleRegion}" class="btn-no-styles pick-region-btn"><ids-col class="change-region" cols="auto">${this.pickregiontext}</ids-col><ids-col alignself="center" cols="auto"><ids-icon-chevron-bold class="change-region-chevron ${this.isRegionExpanded?"expanded":""}" color="#A00B36" width="7" height="12"></ids-icon-chevron-bold></ids-col></button></ids-col>`}toggleRegion(e){if(this.isValidKey(e)){this.isRegionExpanded=!this.isRegionExpanded;let e=new CustomEvent("didToggleRegion",{detail:{isExpanded:this.isRegionExpanded}});this.dispatchEvent(e)}}isValidKey(e){return"Space"===e.code||"Enter"===e.code&&"keydown"===e.type||"click"===e.type}renderItems(){switch(this.type){case"1177":case"1177-pro":case"inera":case"inera-admin":case"inera-admin-legacy":return t`<ids-col class="header-items-wrapper" cols="auto"><ids-row class="header-items" align="center"><slot></slot></ids-row></ids-col>`;case"inera-legacy":return t`<ids-col class="header-items-wrapper" cols="auto"><ids-row justify="end" class="header-items" align="center"><slot></slot></ids-row><ids-row justify="end" class="header-nav"><slot name="header-nav"></slot></ids-row></ids-col>`;default:return t``}}renderServiceName(){return"inera-admin"===this.type?t`<ids-col>${this.renderBrandText()}<h2 class="header-service-name-inera">EN TJÄNST FRÅN INERA</h2></ids-col>`:t`<ids-col class="service-name-col">${this.brandtexttop?t`<p class="header-unit-name top">${this.brandtexttop}</p>`:""} ${this.renderBrandText()} ${this.brandtextbottom?t`<p class="header-unit-name bottom">${this.brandtextbottom}</p>`:""}</ids-col>`}renderBrandText(){return this.brandtext?t`<h1 class="header-service-name ${this.brandtexttop||this.brandtextbottom?"is-supplemented":""}">${this.brandtext}</h1>`:this.querySelector('[slot="brand-text"]')?t`<span class="${this.brandtexttop||this.brandtextbottom?"is-supplemented":""}"><slot name="brand-text"></slot></span>`:t``}renderHeader(){switch(this.type){case"1177":return t`${this.renderLogo()} ${this.renderRegionPicker()}<div class="${this.unresponsive?"grid-spacer":"grid-spacer-desktop"}"></div>${this.renderItems()}`;case"1177-pro":return t`${this.renderLogo()} ${this.renderServiceName()} ${this.renderItems()}`;case"inera":case"inera-legacy":return t`${this.renderLogo()}<div class="grid-spacer"></div>${this.renderItems()}`;case"inera-admin":case"inera-admin-legacy":return t`${this.renderServiceName()} ${this.renderItems()}`;default:return t``}}render(){return t`<header><div class="header-main"><ids-container gutterless ?fluid="${this.fluid}"><ids-row class="header-inner">${this.renderHeader()}</ids-row></ids-container></div>${"inera-legacy"===this.type?t``:t`<slot name="header-nav"></slot>`}</header>`}}u.styles=[o,s,r,n,d,a,l,c],e([h({type:String,reflect:!0})],u.prototype,"type",void 0),e([h({type:String})],u.prototype,"brandtext",void 0),e([h({type:String})],u.prototype,"brandtexttop",void 0),e([h({type:String})],u.prototype,"brandtextbottom",void 0),e([h({type:String})],u.prototype,"pickregiontext",void 0),e([h({type:Boolean})],u.prototype,"hidebrand",void 0),e([h({type:Boolean,reflect:!0})],u.prototype,"fluid",void 0),e([h({type:Boolean})],u.prototype,"hideregionpicker",void 0),e([h({type:String})],u.prototype,"srlogolabel",void 0),e([h({type:Boolean,reflect:!0})],u.prototype,"unresponsive",void 0),e([h({type:String})],u.prototype,"logohref",void 0),e([g()],u.prototype,"isRegionExpanded",void 0),e([g()],u.prototype,"regionIcon",void 0);export{u as IDSHeader};
