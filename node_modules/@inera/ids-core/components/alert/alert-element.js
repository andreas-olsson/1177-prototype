import{__decorate as t}from"tslib";import{css as e,LitElement as i,html as s}from"lit";import{property as o,state as r}from"lit/decorators.js";import{generateId as l}from"../../utilities/utils.js";import a from"@inera/ids-design/components/alert/alert-lit";class n extends i{constructor(){super(...arguments),this.collapsable=!1,this.ribbon=!1,this.collapsed=!1,this.dismissible=!1,this.headline="",this.compact=!1,this.type="info",this.srclosetext="St√§ng alert",this.srcollapsetext="Minimera alertmeddelande",this.srexpandtext="Expandera alertmeddelande",this.sricontitle="",this.isCollapsed=!1,this.norole=!1}firstUpdated(t){super.firstUpdated(t),this.collapsable&&(this.isCollapsed=this.collapsed),this.setupScreenreader(),this.updateCompact()}updated(t){super.updated(t),this.updateCompact()}setupScreenreader(){if(!this.getAttribute("role")&&!this.norole){this.setAttribute("role","alert");const t=this.querySelector("[slot=headline]");if(t)switch(t.tagName){case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":if(t.id)this.setAttribute("aria-labelledby",t.id);else{const e=l();t.setAttribute("id",e),this.setAttribute("aria-labelledby",e)}return}}}updateCompact(){this.compact=!Boolean(this.headline)&&!this.querySelector("[slot=headline]")}close(){let t=new CustomEvent("closed");this.dispatchEvent(t)}toggleCollapse(){this.isCollapsed=!this.isCollapsed,this.collapsed=this.isCollapsed;let t=new CustomEvent("collapsed",{detail:{isCollapsed:this.isCollapsed}});this.dispatchEvent(t)}getIconColor(){switch(this.type){case"attention":return{color:"var(--IDS-ALERT--ATTENTION__ICON__COLOR-1)",color2:"var(--IDS-ALERT--ATTENTION__ICON__COLOR-2)"};case"success":return{color:"var(--IDS-ALERT--SUCCESS__ICON__COLOR-1)",color2:"var(--IDS-ALERT--SUCCESS__ICON__COLOR-2)"};case"error":return{color:"var(--IDS-ALERT--ERROR__ICON__COLOR-1)",color2:"var(--IDS-ALERT--ERROR__ICON__COLOR-2)"};default:return{color:"var(--IDS-ALERT--INFO__ICON__COLOR-1)",color2:"var(--IDS-ALERT--INFO__ICON__COLOR-2)"}}}renderButton(){return this.dismissible?s`<div class="ids-alert__button"><button class="ids-alert__close" @click="${this.close}" aria-label="${this.srclosetext}"><ids-icon-close-bold color="var(--IDS-ALERT__BUTTON__ICON__COLOR)" width="100%" height="${this.ribbon?"16":"24"}"></ids-icon-close-bold></button></div>`:this.collapsable?s`<div class="ids-alert__button"><button class="ids-alert__expand" @click="${this.toggleCollapse}" aria-expanded="${!this.isCollapsed}" aria-controls="alert-content" aria-label="${this.isCollapsed?this.srexpandtext:this.srcollapsetext}"><ids-icon-chevron color="var(--IDS-ALERT__BUTTON__ICON__COLOR)" width="100%" height="24" rotate="${this.isCollapsed?"90":"-90"}"></ids-icon-chevron></button></div>`:s``}renderIcon(){const t=this.headline?"":"ids-alert__state-icon",{color:e,color2:i}=this.getIconColor();return"attention"===this.type?s`<ids-icon-attention title="${this.sricontitle}" color="${e}" color2="${i}" width="100%" height="100%" class="${t}"></ids-icon-attention>`:"success"===this.type?s`<ids-icon-success title="${this.sricontitle}" color="${e}" color2="${i}" width="100%" height="100%" class="${t}"></ids-icon-success>`:"error"===this.type?s`<ids-icon-warning title="${this.sricontitle}" color="${e}" color2="${i}" width="100%" height="100%" class="${t}"></ids-icon-warning>`:s`<ids-icon-information title="${this.sricontitle}" color="var(--IDS-ALERT--INFO__ICON__COLOR-1)" color2="var(--IDS-ALERT--INFO__ICON__COLOR-2)" width="100%" height="100%" class="${t}"></ids-icon-information>`}renderWithHeadline(){return s`${this.renderIcon()}<div class="ids-alert__headline">${this.headline.length>0?s`<h2>${this.headline}</h2>`:s`<slot name="headline"></slot>`}</div>${this.renderButton()}<div class="ids-alert__content">${this.renderContent()}</div>`}renderContent(){return this.isCollapsed?s``:s`<slot></slot>`}renderWithoutHeadline(){return s`<div class="ids-alert__content"><div class="ids-alert__content__icon">${this.renderIcon()}</div><div class="ids-alert__content__text">${this.renderContent()}</div></div>${this.renderButton()}`}renderAlert(){return this.compact||this.ribbon?this.renderWithoutHeadline():this.renderWithHeadline()}getAlertStateClasses(){return`ids-alert--${this.type.toLowerCase()} \n    ${this.isCollapsed?" ids-alert--collapsed":""}\n    ${this.ribbon?" ids-alert--ribbon":""}\n    ${this.compact?" ids-alert--compact":""}`}render(){return s`<div class="ids-alert ${this.getAlertStateClasses()}">${this.renderAlert()}</div>`}}n.styles=[e`:host{display:block}`,a],t([o({type:Boolean})],n.prototype,"collapsable",void 0),t([o({type:Boolean,reflect:!0})],n.prototype,"ribbon",void 0),t([o({type:Boolean,reflect:!0})],n.prototype,"collapsed",void 0),t([o({type:Boolean})],n.prototype,"dismissible",void 0),t([o({type:String})],n.prototype,"headline",void 0),t([o({type:Boolean,reflect:!0})],n.prototype,"compact",void 0),t([o({type:String})],n.prototype,"type",void 0),t([o({type:String})],n.prototype,"srclosetext",void 0),t([o({type:String})],n.prototype,"srcollapsetext",void 0),t([o({type:String})],n.prototype,"srexpandtext",void 0),t([o({type:String})],n.prototype,"sricontitle",void 0),t([r()],n.prototype,"isCollapsed",void 0),t([o({type:Boolean})],n.prototype,"norole",void 0);export{n as IDSAlert};
